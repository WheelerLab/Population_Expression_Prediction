#These notes were formed in re-running both LWK and MKK.
#POP represents any of the 7 HapMap3 Populations used.

1) a) Copy the HapMap3 Genotype Data into own directory.
    '/home/wheelerlab1/Data/Stranger_et_al_pop_eQTLs/HapMap3-genotypes/hapmap3_r2_b36_fwd.consensus.qc.poly.bed'
    '/home/wheelerlab1/Data/Stranger_et_al_pop_eQTLs/HapMap3-genotypes/hapmap3_r2_b36_fwd.consensus.qc.poly.bim'
    '/home/wheelerlab1/Data/Stranger_et_al_pop_eQTLs/HapMap3-genotypes/hapmap3_r2_b36_fwd.consensus.qc.poly.fam'
    
  b) Copy Stranger Gene Expression Data into own directory.
    '/home/wheelerlab1/Data/Stranger_et_al_pop_eQTLs/7-HapMap3-pops-exp/E-MTAB-264.processed.1/POP_p3.expression'
    
  c) Make a POP.list of the population's samples by FID and IID.
    Use 'head POP_p3_expression.txt' to copy the list of the population samples.
    Make the POP.txt using nano by copying these samples into the file, and seperating them by line.
        Example:  NA19027
                  NA19028
                  NA19031
                  NA19035
                  NA19036
                  etc.
        ***It may be useful to note how many lines are in this file, as it shows the number of people we have expression data for.
    In R:
        'library(dplyr)
         Poplist <- read.table('POP.txt')
         Poplist <- dplyr::mutate(Poplist, V2 = V1)
         fam <- read.table('hapmap3_r2_b36_fwd.consensus.qc.poly.fam')
         combined <- dplyr::left_join(Poplist, fam, by = 'V2')
         newlist <- dplyr::select(combined, V1.y, V2)
         write.table(newlist, file='POP.list', quote = F, row.names = F, col.names = F)'
    

2) Use liftOver to update reference build from hg18 to hg19.
    a) Create the ".bed file" using R so it is in the proper format for use in liftOver.
        This file is not the actual 'hapmap3_r2_b36_fwd.consensus.qc.poly.bed' file, but is made. 
        Use my '0100_update_bed_file_liftover.R' script in my Population_Expression_Prediction respository.
            Example Output File:    chr1    743267  743268  rs3115860
                                    chr1    766408  766409  rs12124819
                                    chr1    773885  773886  rs17160939
        Output file will be named 'POP_liftOver.bed' using script.
        
    b) Run liftOver.
        You first need to download and save the hg18ToHg19.over.chain.gz file to your directory. Also make sure it is gzipped.
            Get this file from (http://hgdownload.cse.ucsc.edu/goldenPath/hg18/liftOver/hg18ToHg19.over.chain.gz)
        'liftOver POP_liftOver.bed hg18ToHg19.over.chain.gz output.bed unlifted.bed'
            This page is helpful if you have questions: (http://genome.sph.umich.edu/wiki/LiftOver)
        
 3) Update the HapMap3 Genotype Data files (.bed, .bim, .fam) so they are population specific.
        Use 'POP.list' with --keep tag, as those are the samples we have expression data for.
        'plink --bfile hapmap_r2_b36_fwd.consensus.qc.poly --keep POP.list --make-bed --out POP_hapmap_r2_b36_fwd.consensus.qc.poly'
        ***Again, note how many people pass filters and QC. It may not be the same number as the people in 'POP.list'.
 
 4) Update .bim file to remove unlifted SNPs after liftOver.
